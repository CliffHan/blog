---
title: Ubuntu使用小米随身Wifi
date: 2019-09-18 12:36:27
categories:
  - 开发
tags:
  - 小米随身Wifi
  - Ubuntu
---

网络出了点状况，虚拟机连不上了，碰巧手上有个小米随身Wifi可以当无线网卡，插上虚拟机一试，我擦，不能用？！

搜了一下，大概是这么个状况，这小东西用的是MTK MT7601芯片，驱动在Ubuntu 18.04里面已经有了，但是小米很机智（zei）的使用了不同的VID/PID，因此自然认不到了。

既然知道原因，那就要加上。可网上给出的方法都是要编译源码。原始的github链接已经打不开了，好不容易从ppa上找到了源码，直接编译还编不过。感觉很悲催。

最后还是伟大的stackoverflow上找到了解决办法，其实关键就是把小米自己的VID/PID加到mt7601u的驱动里面就是了。命令就这几句：

```shell
# 必须使用root用户，但不知道为什么sudo命令不能直接用在下面那条命令上
sudo -i
# 小米随身WIFI的VID/PID可以通过lsusb看到，是2717:4106
echo "2717 4106" > /sys/bus/usb/drivers/mt7601u/new_id
```

执行完成后，重新插一次就行了。重启后仍然有效。问题解决。